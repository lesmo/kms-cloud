@{
	LayoutValues layoutValues
		= (LayoutValues)ViewData["LayoutValues"];

	layoutValues
		= layoutValues ?? new LayoutValues();
}

<!DOCTYPE html>
<html lang="@CultureInfo.CurrentCulture.Name.ToLower()">
<head>
	<meta charset="utf-8" />
	<meta name="description" content="The description of my page" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	@* user-scalable=no << Eliminado de {viewport} cuz' then it's not responsive *@
	
	<title>KMS :: @(ViewBag.Title ?? LayoutStrings.DefaultTitle)</title>

	@* Styles *@
	@Html.RenderCssBundle("~/Assets/Stylesheets.css.bundle", BundleOptions.Combined)
	@* Scripts *@
	@Html.RenderJsBundle("~/Assets/Javascript.js.bundle", BundleOptions.Combined)
</head>
<body data-distance-unit="@(RegionInfo.CurrentRegion.IsMetric ? "kms" : "mi")" data-weight-unit="@(RegionInfo.CurrentRegion.IsMetric ? "kg" : "lb")">
	<header>
		<div class="contenedor2">
			<a href="@Url.Action("Overview", "Index", new { lang = CultureInfo.CurrentCulture.Name })">
				<h1>
					<span class="ocultar">KMS</span>
					<img src="@Url.Content("~/Images/Header/Header.KmsLogo.png")" alt="KMS">
				</h1>
			</a>
			<nav>
				<ul>
					<li>
						@Html.ActionLink(
							LayoutStrings.MyProfile,
							"Index",
							"Overview",
							null,
							new {
								@class = layoutValues.Section == LayoutValues.MainSection.MyProfile ? "active" : ""
							}
						)
					</li>
					<li>
						@Html.ActionLink(
							LayoutStrings.Tips,
							"Index",
							"Tips",
							null,
							new {
								@class = layoutValues.Section == LayoutValues.MainSection.Tips ? "active" : ""
							}
						)
					</li>
					<li>
						@Html.ActionLink(
							LayoutStrings.Rewards,
							"Index",
							"Rewards",
							null,
							new {
								@class = layoutValues.Section == LayoutValues.MainSection.Rewards ? "active" : ""
							}
						)
					</li>
					<li>
						@Html.ActionLink(
							LayoutStrings.Friends,
							"Index",
							"Friends",
							null,
							new {
								@class = layoutValues.Section == LayoutValues.MainSection.Friends ? "active" : ""
							}
						)
					</li>
				</ul>
			</nav>

			<div class="alertas-header">
				@if ( layoutValues.Notifications.Where(w => w.Discarded == false).Count() > 0 ) {
					<span>@layoutValues.UnreadMessages</span>
				}
				
				<ul class="notificacionesPop ocultar">
					@foreach ( LayoutNotification notification in layoutValues.Notifications ) {
						<li>
							<figure>
								<img src="@notification.IconUri.AbsoluteUri" alt="@notification.Title">
							</figure>
							<div class="info">
								<h4>@notification.Title</h4>
								<p>@notification.Description</p>
							</div>
						</li>
					}
				</ul>
			</div>
			<a href="@Url.Action("Entry", "Index")" class="configuracion-header"></a>

			<div class="buscador-header">
				@using ( Html.BeginForm("Index", "Search", FormMethod.Get) ) {
					<input type="search" name="kms-q" placeholder="@LayoutStrings.SearchPlaceholder" />
					<input type="submit" class="submit" value="">
				}
			</div>
		</div>
	</header>

	<div id="wrap">
		@* -- Left Sidebar --- *@
		<aside id="sidebar">
		@* - Datos generales del Usuario - *@
			<section id="Usuario">
				<h2>@layoutValues.UserName @layoutValues.UserLastname</h2>
				<figure>
					<img src="@layoutValues.UserPicture.AbsoluteUri">
				</figure>
				<span class="distancia">
					@layoutValues.TotalDistance @(RegionInfo.CurrentRegion.IsMetric ? "kms" : "mi")
				</span>
				<span class="origen">
					@layoutValues.LocationString.ToUpper()
				</span>
			</section>

			@* - Próxima Recompensa (o última recompensa ganada) - *@
			<section id="recompensaDash">
				@if ( layoutValues.RecentlyUnlockedReward == null ) {
					<span class="proxRecomp">@LayoutStrings.NextRewardIn</span>
					<span class="bandera">
						<img src="@Url.Content("~/Images/Sidebar/Sidebar.Medal.gif")" alt="">
					</span>
					<span class="kms">
						@layoutValues.NextRewardsDistanceRemaining @(RegionInfo.CurrentRegion.IsMetric ? "kms" : "mi")
					</span>
					<div id="barra">
						<div class="progreso" style="width: @((layoutValues.TotalDistanceCentimeters / layoutValues.NextRewardDistanceCentimeters) * 100)%;"></div>
					</div>
				} else {
					<img src="img/medalla.png" alt="">
					<a href="@Url.Action("Detail", "Rewards", new { id = layoutValues.RecentlyUnlockedReward.RewardId })" class="botonDorado">
						@LayoutStrings.ViewReward.ToUpper()
					</a>
				}
			</section>

			<section id="tipDelDia">
				<figure>
					<img src="@layoutValues.TipOfTheDay.IconUri.AbsoluteUri" alt="@layoutValues.TipOfTheDay.Category">
				</figure>
				<h3>@LayoutStrings.TipOfTheDay.ToUpper()</h3>
				<article>
					@layoutValues.TipOfTheDay.Text
				</article>
			</section>

			<section id="redes-sidebar">
				<ul>
					<li><a href="#" class="corona"></a></li>
					<li><a href="#" class="facebook"></a></li>
					<li><a href="#" class="twitter"></a></li>
				</ul>
			</section>
		</aside>

		@* -- Body -- *@
		<section id="contenidos">
			@RenderBody()
			<div class="bottom-abajo"></div>
		</section>

		<div style="clear:both"></div>
	</div>

	<footer>
		<div class="contenedor">
			<nav>
				<ul>
					<li>
						@Html.ActionLink(
							LayoutStrings.FooterProduct,
							"Index",
							"Entry"
						)
					</li>
					<li>
						@Html.ActionLink(
							LayoutStrings.FooterServices,
							"Index",
							"Entry"
						)
					</li>
					<li>
						@Html.ActionLink(
							LayoutStrings.FooterStores,
							"Index",
							"Entry"
						)
					</li>
					<li>
						@Html.ActionLink(
							LayoutStrings.FooterUs,
							"Index",
							"Entry"
						)
					</li>
					<li>
						@Html.ActionLink(
							LayoutStrings.FooterKms,
							"Index",
							"Entry"
						)
					</li>
				</ul>
			</nav>
			<ul class="redes">
				<li>
					<a href="https://www.facebook.com/Kms.mex" target="_blank">
						<img src="@Url.Content("~/Images/Footer/Footer.Facebook.png")" alt="Facebook: KMS.mex">
					</a>
				</li>
				<li>
					<a href="https://twitter.com/kmsmex" target="_blank">
						<img src="@Url.Content("~/Images/Footer/Footer.Twitter.png")" alt="Twitter: &#64;kmsmex">
					</a>
				</li>
				<li>
					@* TODO: Establecer {subject} y {body} a texto predefinido *@
					<a href="mailto:dime@kms.me" target="_blank">
						<img src="@Url.Content("~/Images/Footer/Footer.Mail.png")" alt="Email: dime&#64;kms.me">
					</a>
				</li>
			</ul>
		</div>
	</footer>

	@* Footer Scripts (Optional) *@
	@RenderSection("FooterScripts", required: false)
</body>
</html>
